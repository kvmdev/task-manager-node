<%- include("partials/header.ejs") %>

<h1>Create new user</h1>

<form id="form">
    <label for="name">Name</label>
    <input type="text" name="name" id="name" required>

    <label for="password">Password</label>
    <input type="password" name="password" id="password" required>

    <input type="submit" value="Create">
</form>

<script>
    document.getElementById("form").addEventListener("submit", (event) => {
        event.preventDefault();
        const data = {};
        data.name = document.getElementById("name").value;
        data.password = document.getElementById("password").value;
        
        fetch("/api/users", {
            method: "POST",
            body: JSON.stringify(data),
            headers: {
                "Content-Type": "application/json",
                "Accept": "application/json"
            }
        }).then(response => {
            if (response.ok) {
                window.location.href = "/";
            } else {
                alert("Failed to create user");
            }
        }).catch(error => {
            alert("Failed to create user");
        });
    });
</script>

<%- include("partials/footer.ejs") %>